<html>
<head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        .sidebar {
            height: 100%;
            width: 230px;
            position: fixed;
            z-index: 1;
            top: 0;
            left: 0;
            background-color: #f1f1f1;
            overflow-x: hidden;
            padding-top: 20px;
        }
        .sidebar a {
            padding: 6px 8px 6px 16px;
            text-decoration: none;
            font-size: 25px;
            color: #818181;
            display: block;
        }
        .sidebar a:hover {
            color: #020000;
        }
        .sidebar summary {
            padding: 6px 8px 6px 16px;
            text-decoration: none;
            font-size: 25px;
            color: #818181;
            display: block;
        }
        .sidebar summary:hover {
            color: #020000;
        }
        .main {
            margin-left: 230px;
            padding: 0px 10px;
        }
        .main h1 {
            padding: 6px 8px 6px 16px;
            text-decoration: none;
            font-size: 25px;
            color: #252525;
            display: block;
        }
        .container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        .form-block, .chat-block, .chart-block {
            width: 45%;
            margin: 20px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f4f4f4;
        }
        .form-block, .chat-block {
            max-width: 400px;
        }
        .chat-block {
            max-height: 300px;
            height: 400px;
            overflow-y: auto;
        }
        .code-block {
            color: #44e23e;
            background-color: #3b3b3b;
            border: 2px solid #000000;
            padding: 5px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <details>
            <summary> <span id="arrow1">▶</span> Click to navigate</summary>
            <a href="#placeholder1">History of Python</a><br>
            <a href="#placeholder2">Examples</a><br>
        </details>
    </div>

    <div class="main">
        <details>
            <summary><p id="placeholder1"> <span id="arrow2">▶</span> History of Python</p></summary>
            <h1>1990: Birth of Python</h1>
            December 1989:<br>
            Guido van Rossum, a Dutch programmer, started implementing Python as a hobby project during his holiday break.<br>
            1990:<br>
            The language was officially born. Its name, "Python," was inspired by Monty Python’s Flying Circus.<br><br><br>

            <h1>1991: Python 0.9.0</h1>
            February 1991:<br>
            Guido released Python 0.9.0 to the public.<br><br><br>

            <h1>1994: Python 1.0</h1>
            January 1994:<br>
            Python 1.0 was released.<br><br><br>

            <h1>2000: Python 2.0</h1>
            October 2000:<br>
            Python 2.0 was released.<br><br><br>

            <h1>2008: Python 3.0</h1>
            December 2008:<br>
            Python 3.0 was released.<br><br><br>

            <h1>2010s: Python's Rise in Popularity</h1>
            2010:<br>
            Django, a popular web framework built on Python, gained traction.<br><br><br>

            <h1>2020: End of Python 2</h1>
            January 1, 2020:<br>
            Official support for Python 2 ended.<br><br><br>

            <h1>2021 and Beyond: Modern Python</h1>
            2021:<br>
            Python became one of the most popular programming languages globally.<br><br><br>
        </details>

        <details>
            <summary><p id="placeholder2"><span id="arrow3">▶</span> Examples</p></summary>
            <div class="container">
                <div class="chart-block">
                    <h1>Graph</h1>
                    <div>
                        {{ graph|safe }}
                    </div>                        
                </div>

                <div class="code-block">
                    <pre><code>
    &lt;div class="chart-block"&gt;
    &lt;h2&gt;Bar Chart&lt;/h2&gt;
    &lcub;&lcub; graph|safe &rcub;&rcub;
    &lt;/div&gt;
                    </code></pre>
                </div>

                <div class="form-block">
                    <h2>Contact Form</h2>
                    <form method="POST">
                        <label for="name">Name:</label><br>
                        <input type="text" id="name" name="name"><br>
                        <label for="email">Email:</label><br>
                        <input type="email" id="email" name="email"><br>
                        <input type="submit" value="Submit">
                    </form>
                    {% if name and email %}
                    <p>Name: {{ name }}</p>
                    <p>Email: {{ email }}</p>
                    {% endif %}
                </div>

                <div class="chat-block">
                    <h1>Live Chat</h1>

                    {% if not name %}
                        <!-- Show username form if username not set -->
                        <form id="username-form" method="POST">
                            <label for="username">Enter your username:</label>
                            <input type="text" id="username" name="username" required>
                            <button type="submit">Join Chat</button>
                        </form>
                    {% else %}
                        <!-- Chat UI once username is set -->
                        <div>
                            <h2>Welcome, {{ name }}!</h2>
                            <div id="chat-messages"></div>
                            <form id="chat-form">
                                <input type="text" id="message" placeholder="Type a message..." required>
                                <button type="submit">Send</button>
                            </form>
                        </div>
                    {% endif %}
                </div>
            </div>
        </details>
    </div>

    <script>
        const summaries = document.querySelectorAll('summary');
        summaries.forEach((summary, index) => {
            const arrow = summary.querySelector('span');
            summary.addEventListener('click', function() {
                if (arrow.textContent === '▶') {
                    arrow.textContent = '▼';
                } else {
                    arrow.textContent = '▶';
                }
            });
        });

        // Socket.io for real-time chat
        var socket = io.connect();
        var username = "{{ name }}";

        // Handle message sending from user
        document.getElementById("chat-form").addEventListener("submit", function(event) {
            event.preventDefault();
            var message = document.getElementById("message").value;
            if (message.trim() !== "") {
                socket.emit("message", username + ": " + message);
                document.getElementById("message").value = "";
            }
        });

        // Handle incoming messages
        socket.on("message", function(msg) {
            var chatMessagesDiv = document.getElementById("chat-messages");
            var newMessage = document.createElement("div");
            newMessage.textContent = msg;
            chatMessagesDiv.appendChild(newMessage);
        });
    </script>
</body>
</html>
